<form [formGroup]="form">
  <tabset #tabset id="specialization-form-tabset">
    <tab heading="Загальна інформація">
      <div class="form-layout">
        <div class="form-item">
          <div class="form-group">
            <label for="name">Назва</label>
            <input formControlName="name" type="text" class="form-control" id="name">
          </div>

          <div class="form-group">
            <label for="nameEng">Назва англ.</label>
            <input formControlName="nameEng" type="text" class="form-control" id="nameEng">
          </div>

          <div class="form-group">
            <label for="specializationCode">Код спеціалізації</label>
            <input formControlName="code" type="text" class="form-control" id="specializationCode">
          </div>
        </div>

        <div class="form-group form-item">
          <div class="form-group">
            <div>
              <label for="specialityId" class="required">Спеціальність</label>
              <div class="form-check checkbox-group-right-align">
                <input
                  (change)="onSpecialityCheckboxChange($event)"
                  type="checkbox"
                  class="form-check-input"
                  name="allSpecialityCheckbox"
                  id="allSpecialityCheckbox">
                <label class="form-check-label" for="allSpecialityCheckbox">Всі</label>
              </div>
            </div>
            <select formControlName="specialityId" class="form-control" id="specialityId"
                    [appValidation]="form.controls.specialityId">
              <option *ngFor="let speciality of specialities" [ngValue]="speciality.id">
                {{speciality.code + ' ' + speciality.name}}
              </option>
            </select>
            <app-validation-errors [control]="form.controls.specialityId"></app-validation-errors>
          </div>

          <div class="form-group">
            <label for="degreeId" class="required">Ступінь</label>
            <select formControlName="degreeId" class="form-control" id="degreeId"
                    [appValidation]="form.controls.degreeId">
              <option *ngFor="let degree of degrees" [ngValue]="degree.id">{{degree.name}}</option>
            </select>
            <app-validation-errors [control]="form.controls.degreeId"></app-validation-errors>
          </div>

          <div class="form-group">
            <label for="departmentId" class="required">Кафедра</label>
            <select formControlName="departmentId" class="form-control" id="departmentId">
              <option *ngFor="let department of departments" [ngValue]="department.id">{{department.name}}</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-layout">
        <div class="position-relative form-item">
          <div class="h6 input-group-title">Вартість навчання:</div>

          <div class="ml-3">
            <div class="form-group ml-3">
              <label for="paymentFulltime">Повної форми</label>
              <input formControlName="paymentFulltime" type="number" class="form-control" id="paymentFulltime">
            </div>

            <div class="form-group ml-3">
              <label for="paymentExtramural">Скороченої форми</label>
              <input formControlName="paymentExtramural" type="number" class="form-control" id="paymentExtramural">
            </div>
          </div>
        </div>

        <div class="form-item">
          <div class="h6">Сертифікат:</div>
          <div class="ml-3">
            <div class="form-group d-flex align-items-center">
              <label style="width: 65px" for="certificateNumber">Номер</label>
              <input formControlName="certificateNumber" type="text" class="form-control" id="certificateNumber">
            </div>

            <div class="form-group d-flex align-items-center">
              <label style="width: 65px" for="certificateDate">Дата</label>
              <input formControlName="certificateDate" type="date" class="form-control" id="certificateDate">
            </div>
          </div>
        </div>
      </div>
    </tab>

    <tab heading="Гарант програми">
      <div class="form-layout">
        <div class="form-item">
          <div class="form-group">
            <div formGroupName="programHead">
            <label for="programHead">Гарант програми</label>
            <input formControlName="fullName"
                   [typeahead]="teachersDataSource"
                   (typeaheadOnSelect)="onProgramHeadSelect($event)"
                   [typeaheadOptionsLimit]="12"
                   [typeaheadMinLength]="3"
                   [typeaheadItemTemplate]="template"
                   placeholder="Введіть прізвище"
                   class="form-control"
                   id="programHead"
                   autocomplete="off">
            </div>
          </div>

          <div class="form-group">
            <label for="educationalProgramHeadNameEng1">Гарант програми англійською</label>
            <input type="text" class="form-control" id="educationalProgramHeadNameEng1" disabled>
          </div>
        </div>

        <div class="form-item">
          <div class="form-group">
            <label for="educationalProgramHeadInfo1">Інформація про гаранта програми</label>
            <textarea type="text" class="form-control ta-2l" id="educationalProgramHeadInfo1"
                      value="{{currentProgramHead?.scientificDegree?.name}}, {{AcademicTitleValues[currentProgramHead?.academicTitle]?.ukr}}" disabled>
          </textarea>
          </div>

          <div class="form-group">
            <label for="educationalProgramHeadInfoEng1">
              Інформація про гаранта програми англійською
            </label>
            <textarea type="text" class="form-control ta-2l" id="educationalProgramHeadInfoEng1"
                      value="{{currentProgramHead?.scientificDegree?.nameEng}}, {{AcademicTitleValues[currentProgramHead?.academicTitle]?.eng}}" disabled>
          </textarea>
          </div>
        </div>
      </div>
    </tab>

    <tab heading="Компетентності" (selectTab)="competencies.getCompetencies()" *ngIf="isShow">
      <specialization-competencies #competencies [specializationId]="initialData.id" [lang]="lang.UKR"
                                   [onlyCreating]="!updateForm">
      </specialization-competencies>
    </tab>

    <tab heading="Компетентності англ." (selectTab)="competenciesEng.getCompetencies()" *ngIf="isShow">
      <specialization-competencies #competenciesEng [specializationId]="initialData.id" [lang]="lang.ENG"
                                   [onlyCreating]="!updateForm">
      </specialization-competencies>
    </tab>

    <tab heading="Кваліфікації" (selectTab)="qualification.loadData(initialData.id)" *ngIf="isShow">
      <specialization-qualification #qualification [updateForm]="updateForm"></specialization-qualification>
    </tab>
  </tabset>
</form>

<ng-template #template let-model="item" let-index="index">
  <div class="py-2">
    <b>{{model.surname}} {{model.name}} {{model.patronimic}}</b>
  </div>
</ng-template>
